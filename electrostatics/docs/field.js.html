<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: field.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: field.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*******************************************************************************
*   @file field.js
*   @brief A file containing the Field class
*
*   @author &lt;a href='mailto:omareq08@gmail.com'> Omar Essilfie-Quaye &lt;/a>
*   @version 1.0
*   @date 22-Aug-2018
*
*******************************************************************************/

/**
*	A class representing an electrostatic field and all the particles that
*	create it.
*/
class Field {
	/**
	*	Create a Field
	*
	*	@param {number} width  - The width of the Field
	*	@param {number} height - The height of the Field
	*/
	constructor(width, height) {
		this.width = width;
		this.height = height;

		/**
		*	2D field vector array.
		*	@type {Array&lt;Array&lt;p5.Vector>>}
		*/
		this.field = [];
		arrayCopy(this.zeroField(), this.field);

		/**
		*	Particles stack.
		*	@type {Particle}
		*/
		this.particles = [];
	}

	/**
	*	Creates field array where all values are a zero vector.
	*
	*	@returns {Array&lt;Array&lt;p5.Vector>>} The 2D array containing the zero
	*		field vectors.
	*/
	zeroField() {
		let zero = createVector(0, 0);
		let zeroCol = [];

		for(let h = 0; h &lt; this.height; h++) {
			zeroCol.push(zero.copy());
		}

		let row = [];

		for(let w = 0; w &lt; this.width; w++) {
			let newCol = [];
			arrayCopy(zeroCol, newCol);
			row.push(newCol);
		}

		return row;
	}

	/**
	*	Adds a particle to the field particles stack.
	*	Calculates the new field vectors.
	*
	*	@param {Particle} part - The particle to be added to the field.
	*/
	addParticle(part) {
		this.particles.push(part);
		for(let w = 0; w &lt; this.width; w++) {
			for(let h = 0; h &lt; this.height; h++) {
				let px = part.pos.x;
				let py = part.pos.y;
				let pc = part.charge;

				let d2 = (px - w) * (px - w) + (py - h) * (py - h);

				let vx = w - px;
				let vy = h - py;
				let v = createVector(vx, vy);

				let e = v.mult(pc / d2);

				this.field[w][h] = p5.Vector.add(this.field[w][h], e);
			}
		}
	}

	/**
	*	Pops particle from the fields particles stack.
	*	Recalculates the field with the particle gone.
	*/
	popParticle() {
		let part = this.particles.pop();

		for(let w = 0; w &lt; this.width; w++) {
			for(let h = 0; h &lt; this.height; h++) {
				let px = part.pos.x;
				let py = part.pos.y;
				let pc = part.charge;

				let d2 = (px - w) * (px - w) + (py - h) * (py - h);

				let vx = w - px;
				let vy = h - py;
				let v = createVector(-vx, -vy);

				let e = v.mult(pc / d2);

				this.field[w][h] = p5.Vector.add(this.field[w][h], e);
			}
		}
	}

	/**
	*	Empties the particle stack.
	*	Zeros the field using {@link Field#zeroField}
	*/
	clear() {
		this.particles = [];
		arrayCopy(this.zeroField(), this.field);
	}

	/**
	*	Draws the field vectors. Draws the particles creating the field.
	*
	*	@param {number} space - The distance in pixels between each grid point.
	*	@param {number} scale - A scale factor that shortens or lengthens the
	*		field vectors that are drawn.
	*/
	draw(space, scale) {
		stroke(0);
		for(let w = 0; w &lt; this.width; w += space) {
			for(let h = 0; h &lt; this.height; h += space) {
				let v = this.field[w][h].copy();
				let l = v.mag();
				let theta = atan2(v.y, v.x);
				let x = scale * l * cos(theta);
				let y = scale * l * sin(theta);

				line(w, h, w + x, h + y);

				ellipse(w, h, space * 0.05, space * 0.05);

			}
		}

		for(let p = 0; p &lt; this.particles.length; p++) {
			let part = this.particles[p];
			part.draw();
		}
	}
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Field.html">Field</a></li><li><a href="Particle.html">Particle</a></li></ul><h3>Global</h3><ul><li><a href="global.html#chargeIsNegative">chargeIsNegative</a></li><li><a href="global.html#draw">draw</a></li><li><a href="global.html#field">field</a></li><li><a href="global.html#keyPressed">keyPressed</a></li><li><a href="global.html#mousePressed">mousePressed</a></li><li><a href="global.html#setup">setup</a></li></ul>
</nav>

<br class="clear">

Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Wed May 05 2021 14:26:40 GMT+0100 (BST)
<footer>
    <div class="links">
        <a href="https://github.com/omareq/" class="github-profile"><span>Github Profile</span></a>
        <a href="../../" class="githubio"><span>Github.io Home</span></a>
        <a href="http://iamoquaye.ga/" class="iamoquaye"><span>iamoquaye</span></a>
    </div>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
