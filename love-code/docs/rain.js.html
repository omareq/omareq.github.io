<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: rain.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: rain.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*******************************************************************************
*   @file rain.js
*   @brief File containing the Rain class.
*
*   @author &lt;a href='mailto:omareq08@gmail.com'> Omar Essilfie-Quaye &lt;/a>
*   @version 1.0
*   @date 29-Mar-2017
*
*******************************************************************************/

/**	Class that holds all the information of one column of rain. */
class Rain {

	/**
	*	Create a Rain object
	*
	*	@param {number} col    - Which column of rain this object is.  Counted
	*		from the left.
	*	@param {number} width  - How wide this column of rain will be.
	*	@param {number} maxLen - The maximum number of hearts in the column.
	*	@param {number} speed  - How fast the column falls dows the screem.
	*/
	constructor(col, width, maxLen, speed) {
		this.col = col;
		this.width = width;
		this.maxLen = maxLen;
		this.randomLength();
		this.speed = speed;
		this.scale = 0.45;
		this.setHeight();
	}

	/**
	*	Changes the height of the column and creates new heart objects above
	*	the screen.
	*/
	setHeight() {
		// height denotes the y position of the column, not the length.
		let newHeight = random(-height, 0);
		this.symbols = [];

		this.symbols.push(new Heart(this.col * this.width,
		  newHeight,
		  this.width * this.scale,
		  "pink"));

		for (let i = this.len - 2; i >= 0; i--) {
			this.symbols.push(new Heart(this.col * this.width,
			 newHeight - 2 * (this.len - 1) * this.width + 2 * i * this.width,
			 this.width * this.scale,
			 "red"));
		}
	}

	/**
	*	Randomises the length of the column.
	*/
	randomLength() {
		this.len = floor(random(1, this.maxLen));
	}

	/**
	*	Resets the column with new parameters.
	*/
	reset() {
		this.randomLength();
		this.setHeight();
		this.symbols[0].stopPulse();
		//console.log("Reseting rain at col: ", this.col);
	}

	/**
	*	Draws each heart in the column and then moves it down by an amount
	*	determined by the speed of the column.
	*/
	draw() {
		for (let i = this.len - 1; i >= 0; i--) {
			// for some reason that i am not yet aware of this loops  begins
			// out of bounds therefore a try catch is included to catch these
			// exceptions.  If they are not caused by this problem the exception
			// is thrown anyway.
			try {
				this.symbols[i].draw();
			} catch (e) {
				if(i >= this.len) {
					continue;
				}
				throw(e);
			}
			let pos = this.symbols[i].getPos();
			this.symbols[i].setPos(pos.x, pos.y + this.speed);

			if(i == this.len - 1) {
				if(pos.y > height) {
					this.reset();
				}
			}
		}

		// 5% chance of starting a new pulse.
		if(random() &lt; 0.05) {
			this.symbols[0].pulse(0.05 * this.width);
		}
	}
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Heart.html">Heart</a></li><li><a href="Rain.html">Rain</a></li></ul><h3>Global</h3><ul><li><a href="global.html#draw">draw</a></li><li><a href="global.html#setup">setup</a></li></ul>
</nav>

<br class="clear">

Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Wed May 05 2021 14:27:28 GMT+0100 (BST)
<footer>
    <div class="links">
        <a href="https://github.com/omareq/" class="github-profile"><span>Github Profile</span></a>
        <a href="../../" class="githubio"><span>Github.io Home</span></a>
        <a href="http://iamoquaye.ga/" class="iamoquaye"><span>iamoquaye</span></a>
    </div>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
